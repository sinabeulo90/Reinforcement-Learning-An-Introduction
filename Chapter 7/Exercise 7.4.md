## Exercise 7.4

### Question:

살사(식 7.4)의 ![equation](https://latex.codecogs.com/svg.latex?n) 단계 이득이 새로운 TD 오차를 이용하여 다음과 같이 정확하게 표현될 수 있음을 증명하라.

![equation](https://latex.codecogs.com/svg.latex?G_{t:t&plus;n}&space;=&space;Q_{t-1}(S_t,&space;A_t)&space;&plus;&space;\sum_{k=t}^{min(t&plus;n,&space;T)-1}&space;\gamma^{k-t}[R_{k&plus;1}&space;&plus;&space;\gamma&space;Q_k(S_{k&plus;1},&space;A_{k&plus;1})&space;-&space;Q_{k-1}(S_k,&space;A_k)])

### Answer:

<img src="https://latex.codecogs.com/svg.latex?\begin{align*}&space;G_{t:t&plus;n}&space;&\doteq&space;R_{t&plus;1}&space;&plus;&space;\gamma&space;R_{t&plus;2}&space;&plus;&space;\cdots&space;&plus;&space;\gamma^{n-1}&space;R_{t&plus;n}&space;&plus;&space;\gamma^n&space;Q_{t&plus;n-1}(S_{t&plus;n},&space;A_{t&plus;n})&space;\\&space;&=[R_{t&plus;1}&space;&plus;&space;\gamma&space;Q_t(S_{t&plus;1},&space;A_{t&plus;1})&space;-&space;Q_{t-1}(S_t,&space;A_t)]&space;\\&space;&&space;\&space;\&space;\&space;&plus;&space;\gamma&space;[R_{t&plus;2}&space;&plus;&space;\gamma&space;Q_{t&plus;1}(S_{t&plus;2},&space;A_{t&plus;2})&space;-&space;Q_{t}(S_{t&plus;1},&space;A_{t&plus;1})]&space;\\&space;&&space;\&space;\&space;\&space;&plus;&space;\cdots&space;\\&space;&&space;\&space;\&space;\&space;&plus;&space;\gamma^{n-1}&space;[R_{t&plus;n}&space;&plus;&space;\gamma&space;Q_{t&plus;n-1}(S_{t&plus;n},&space;A_{t&plus;n})&space;-&space;Q_{t&plus;n-2}(S_{t&plus;n-1},&space;A_{t&plus;n-1})]&space;\\&space;&&space;\&space;\&space;\&space;&plus;&space;Q_{t-1}(S_t,&space;A_t)\\&space;&=&space;Q_{t-1}(S_t,&space;A_t)&space;&plus;&space;\sum_{k=t}^{\min(t&plus;n,T)&space;-&space;1}\gamma^{k-t}[R_{k&plus;1}&space;&plus;&space;\gamma&space;Q_k(S_{k&plus;1},&space;A_{k&plus;1})&space;-&space;Q_{k-1}(S_k,&space;A_k)]&space;\end{align*}" title="\begin{align*} G_{t:t+n} &\doteq R_{t+1} + \gamma R_{t+2} + \cdots + \gamma^{n-1} R_{t+n} + \gamma^n Q_{t+n-1}(S_{t+n}, A_{t+n}) \\ &=[R_{t+1} + \gamma Q_t(S_{t+1}, A_{t+1}) - Q_{t-1}(S_t, A_t)] \\ & \ \ \ + \gamma [R_{t+2} + \gamma Q_{t+1}(S_{t+2}, A_{t+2}) - Q_{t}(S_{t+1}, A_{t+1})] \\ & \ \ \ + \cdots \\ & \ \ \ + \gamma^{n-1} [R_{t+n} + \gamma Q_{t+n-1}(S_{t+n}, A_{t+n}) - Q_{t+n-2}(S_{t+n-1}, A_{t+n-1})] \\ & \ \ \ + Q_{t-1}(S_t, A_t)\\ &= Q_{t-1}(S_t, A_t) + \sum_{k=t}^{\min(t+n,T) - 1}\gamma^{k-t}[R_{k+1} + \gamma Q_k(S_{k+1}, A_{k+1}) - Q_{k-1}(S_k, A_k)] \end{align*}" />
